<!DOCTYPE html>

<html lang="fr">

<head>

    <meta charset="UTF-8">

    <title>SAPHIR LIVE | Scène</title>

    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Montserrat:wght@300&display=swap" rel="stylesheet">

    <style>

        :root { --neon: #00e5ff; --bg: #000; }

        body { background: var(--bg); color: white; font-family: 'Montserrat', sans-serif; margin: 0; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        header { padding: 40px; text-align: center; }

        h1 { font-family: 'Cinzel', serif; font-size: 3.5rem; letter-spacing: 12px; color: var(--neon); text-shadow: 0 0 30px var(--neon); margin: 0; }

        .results { flex: 1; display: flex; justify-content: center; align-items: flex-end; gap: 60px; padding-bottom: 100px; }

        .col { display: flex; flex-direction: column; align-items: center; width: 220px; }

        .bar-container { width: 100px; height: 45vh; background: rgba(255,255,255,0.05); border: 1px solid rgba(0,229,255,0.2); position: relative; border-radius: 50px 50px 0 0; overflow: hidden; }

        .fill { position: absolute; bottom: 0; width: 100%; height: 0%; background: linear-gradient(to top, #008ba3, var(--neon)); box-shadow: 0 0 40px var(--neon); transition: height 1.2s cubic-bezier(0.17, 0.67, 0.83, 0.67); }

        .pct { font-size: 4.5rem; font-family: 'Cinzel', serif; margin-top: 20px; text-shadow: 0 0 10px rgba(255,255,255,0.3); }

        .label { font-size: 1.1rem; text-transform: uppercase; color: var(--neon); letter-spacing: 2px; text-align: center; margin-top: 10px; min-height: 3em; }

    </style>

</head>

<body>

    <header><h1>SAPHIR</h1><p style="letter-spacing: 8px; opacity: 0.4;">CHOIX DU PUBLIC</p></header>

    <div class="results">

        <div class="col"><div class="bar-container"><div id="bar-m1" class="fill"></div></div><div id="txt-m1" class="pct">0%</div><div class="label">Chopin<br>Hiver</div></div>

        <div class="col"><div class="bar-container"><div id="bar-m2" class="fill"></div></div><div id="txt-m2" class="pct">0%</div><div class="label">Debussy<br>Clair de Lune</div></div>

        <div class="col"><div class="bar-container"><div id="bar-m3" class="fill"></div></div><div id="txt-m3" class="pct">0%</div><div class="label">Saphir<br>Néon</div></div>

    </div>

    <script type="module">

        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";

        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
  apiKey: "AIzaSyDXOd8Sb_TsiYqwbebCnXTdZGimeheesR4",
  authDomain: "saphir-live.firebaseapp.com",
  projectId: "saphir-live",
  storageBucket: "saphir-live.firebasestorage.app",
  messagingSenderId: "719917557935",
  appId: "1:719917557935:web:3a7a4e1a846732c1afcc5a",
  measurementId: "G-VQQ9H234NB"
};

        const app = initializeApp(firebaseConfig);

        const db = getDatabase(app);

        onValue(ref(db, 'votes/'), (snap) => {

            const d = snap.val() || { m1:0, m2:0, m3:0 };

            const total = (d.m1 || 0) + (d.m2 || 0) + (d.m3 || 0);

            ['m1','m2','m3'].forEach(id => {

                const p = total > 0 ? Math.round(((d[id]||0)/total)*100) : 0;

                document.getElementById('bar-'+id).style.height = p + '%';

                document.getElementById('txt-'+id).innerText = p + '%';

            });

        });

    </script>

</body>

</html>
